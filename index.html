<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <title>File Handling</title>
    <script src="https://www.w3.org/Tools/respec/respec-w3c-common"
      class="remove"></script>
    <script class='remove'>
  "use strict";
  // See https://github.com/w3c/respec/wiki/ for how to configure ReSpec
  var respecConfig = {
    "doRDFa": false,
    "format": "markdown",
    "githubAPI": "https://api.github.com/repos/WICG/file-handling",
    "issueBase": "https://www.github.com/WICG/file-handling/issues/",
    "noLegacyStyle": true,
    "editors": [{
        name: "Eric Willigers",
        email: "ericwilligers@chromium.org",
        company: "Google Inc.",
        companyURL: "https://google.com",
      },
      {
        name: "Jay Harris",
        email: "harrisjay@chromium.org",
        company: "Google Inc.",
        companyURL: "https://google.com"
      }
      // Add additional editors here.
      // https://github.com/w3c/respec/wiki/editors
    ],
    "shortName": "file-handling",
    "specStatus": "CG-DRAFT",
    "subjectPrefix": "[file-handling]",
    "wg": "WICG",
    "otherLinks": [{
      "key": "Repository",
      "data": [{
        "value": "We are on Github.",
        "href": "https://github.com/WICG/file-handling"
      }, {
        "value": "File a bug.",
        "href": "https://github.com/WICG/file-handling/issues"
      }, {
        "value": "Commit history.",
        "href": "https://github.com/WICG/file-handling/commits/master"
      }, ]
    }],
  };
  </script>
  </head>

  <body>
    <section id="abstract">
      <p>
        This specification defines an API that allows websites to declare
        themselves as <a>file handlers</a>, which can integrate with with the
        native operating system to open files.
      </p>
      <p>
        This is a similar mechanism to <a>Web Share Target</a>, in that it
        allows a website to register with the user agent to later be <a>invoked</a>
        from a native application in the underlying operating system via the
        user agent.
      </p>
      <p>
        However, there are two main differences to <a>Web Share Target</a>:
        <ol>
          <li>The integration point: Share Targets are invoked through a 'Share'
            action (likely a sharesheet in the underlying OS) while File
            Handlers are invoked by an 'Open' action, such as double clicking on
            a file. Thus, the declarations for these two integrations should be
            separated.</li>
          <li>
            Web Share Target provides a read only handle to the file. In order
            to handle files, rather than simply share them, sites require a
            writable file handle.
          </li>
        </ol>
      </p>
      <p>
        Please see the <a
          href="https://github.com/WICG/file-handling/blob/master/explainer.md">Explainer
          document</a>, a high-level overview of the proposal.
      </p>
    </section>
    <section id="sotd">
      <p>
        This is an early draft of the File Handling spec.
      </p>
    </section>
    <section>
      <h2>Prerequisites</h2>
      <p>In order to implement this API, it is REQUIRED that the user agent
        implement <a data-cite="!appmanifest">Web App Manifest</a> and <a
          data-cite="!nativefilesystem">Native File System</a>.</p>
    </section>
    <section class="informative" data-link-for="appmanifest">
      <h2>Usage Example</h2>
      <p>
        To register a site as a file handler a <a>file_handler</a> entry is
        added to the <a data-cite="appmanifest">Web App Manifest</a>, as shown:
      </p>
      <pre class="example json" title="manifest.webmanifest">
        {
          "name": "File Handy",
          "file_handler": [
            {
              "action": "/open-file",
              "name": "Text File",
              "accept": {
                "text/plain": [".txt", ".text"]
              }
            }
          ]
        }
      </pre>
      <p>
        The <a data-link-for="FileHandler">file_handler</a> contains a list of
        <a data-link-for="FileHandlerEntry">file handler entries</a>, which
        describe file type, and what url should be opened to handle that file.</p>
      <p>
        The <a data-link-for="FileHandlerEntryAccept">accept</a> dictionary
        specifies a number of mime types and lists the extensions that they
        correspond to.
      </p>
      <p class="note">
        Web Applications should always list both mime types and extensions to
        ensure that they work across all operating systems. For example, Linux
        only supports handling mime types while Windows only supports handling
        extensions.
      </p>
    </section>
  </body>

</html>
